<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pre-Production Planning :: Clowder Documentation</title>
    <link rel="canonical" href="https://redhatinsights.github.io/clowder/clowder/dev/preprod.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../ui/css/site.css">
    <script>var uiRootPath = '../../ui'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://redhatinsights.github.io/clowder">Clowder Documentation</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="clowder" data-version="dev">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Clowder</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api_reference.html">API Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="contributing.html">Contributing</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="developer-guide.html">Developer Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="crc-guide.html">CodeReady Containers Guide</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sop.html">SOP</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="migration/index.html">Migration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration/migration.html">Migration Docs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration/checklist.html">Check List</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="providers/index.html">Providers</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/confighash.html">Config Hash</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/cronjob.html">CronJob</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/database.html">Database</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/dependencies.html">Dependencies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/deployment.html">Deployment</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/featureflags.html">Feature Flags</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/inmemorydb.html">In-Memory DB</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/kafka.html">Kafka</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/metrics.html">Metrics</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/objectstore.html">Object Storage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/serviceaccount.html">Service Accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/servicemesh.html">Service Mesh</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="providers/web.html">Web</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="usage/index.html">Usage</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/app-workflow.html">App Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/jobs.html">Jobs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Clowder</span>
    <span class="version">dev</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Clowder</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">dev</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Clowder</a></li>
    <li><a href="preprod.html">Pre-Production Planning</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/RedHatInsights/clowder/edit/master/docs/antora/modules/ROOT/pages/preprod.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Pre-Production Planning</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Three things Chris wants to achive in next project:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>CI/CD pipeline</p>
</li>
<li>
<p>Ephemeral environments</p>
</li>
<li>
<p>Smoke testing</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cicd_pipeline"><a class="anchor" href="#_cicd_pipeline"></a>CI/CD Pipeline</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Moving deployment templates to code repos</p>
</li>
<li>
<p>Create build jobs in app-interface</p>
</li>
<li>
<p>Add build_deploy.sh and pr_check.sh to code repos</p>
</li>
<li>
<p>Create common library to run validations when PR is opened</p>
</li>
<li>
<p>Create validations to ensure stage is stable when promoting to prod</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ephemeral_environments"><a class="anchor" href="#_ephemeral_environments"></a>Ephemeral environments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Semantic point: "Ephemeral environments" just means a temporary copy of the
platform and any number of apps on top of it.  It does not necessary map to one
or more namespaces.</p>
</div>
<div class="paragraph">
<p>Smoke testing can be done without having to have a separate service to check
out temporary namespaces.  The value in ephemeral environments would come from
app teams using them for reasons other than running PR smoke tests.</p>
</div>
<div class="paragraph">
<p>Some ideas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Team-specific or personal CI environments</p>
</li>
<li>
<p>Pen testing envs</p>
</li>
<li>
<p>Load testing envs</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I think these use cases could be solved by using the operator to watch
namespaces defined in app-interface.  App teams could then grant themselves edit
access to specific namespaces to be able to debug their isolated environments.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_smoke_testing"><a class="anchor" href="#_smoke_testing"></a>Smoke testing</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Do test frameworks hit the app k8s services directly?  <strong>Yes.</strong></p>
</li>
<li>
<p>Are metrics collected in current test runs? <strong>No, not from Prometheus.</strong></p>
</li>
<li>
<p>Do we need to share a single kafka instance?  <strong>No, but this would be ideal</strong></p>
</li>
<li>
<p>If so, how is this achieved?  <strong>Operator could manage topics transparently</strong></p>
</li>
<li>
<p>Do we need to be able to run front-end tests?  <strong>Yes, but not in the short term</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tasks:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Determine secret management strategy</p>
</li>
<li>
<p>Build library to pull dependent CRs and other resources, probably from app-interface</p>
</li>
<li>
<p>Deploy IQE test runner into same namespace to run tests</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operator"><a class="anchor" href="#_operator"></a>Operator</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few non-technical reasons why pushing to build the operator sooner
rather than later makes sense.  First, it would be ideal to minimize the number
of "migrations" that app teams have to make.  If we do the operator after the
smoke test migration, it will be yet another project that app teams will have to
plan for.  We can instead combine the operator migration with the smoke testing
migration, making the switch to our new CRDs a prerequisite to moving to the new
build/deploy pipeline.</p>
</div>
<div class="paragraph">
<p>Second, we are constrained by the yearly "tick tock" cycle of SaaS development,
centered around Summit in March/April.  We probably only get one more shot at
getting apps improve their operational capabilities before we must hold off
until after March 2021.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../ui/js/site.js" data-ui-root-path="../../ui"></script>
<script async src="../../ui/js/vendor/highlight.js"></script>
  </body>
</html>
